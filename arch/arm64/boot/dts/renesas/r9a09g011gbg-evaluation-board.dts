// SPDX-License-Identifier: GPL-2.0
/*
 * Device Tree Source for the RZ/V2M RDK platform
 *
 * Copyright (C) 2019 Renesas Electronics Corp.
 */

/dts-v1/;
#include "r9a09g011gbg.dtsi"
#include <dt-bindings/gpio/gpio.h>

/ {
    model = "RZ/V2M";
    compatible = "rdk,rdk", "renesas,r8arzv2m";    

    backlight {
        compatible = "pwm-backlight";
        pwms = <&pwm0 0 5000000>;
        brightness-levels = <0 4 8 16 32 64 128 255>;
        default-brightness-level = <6>;
    };

    aliases {
        serial0 = &uart0;
    };

    chosen {
        bootargs = "earlycon=uart,mmio32,0xA4040000,115200n8 console=ttyS0,115200n8 loglevel=8 vmalloc=384M root=/dev/mmcblk0p2 rootwait rootfstype=ext3 rw; rodata=off ip=dhcp";
        stdout-path = "serial0:115200n8";
    };

    memory@58000000 {
        device_type = "memory";
        /* first 256MB is reserved for secure area. */
        reg = <0x00000000 0x58000000 0x0 0x28000000>;
    };

    reserved-memory {
        #address-cells = <2>;
        #size-cells = <2>;
        ranges;

        /* global autoconfigured region for contiguous allocations */
        linux,cma@67800000 {
            compatible = "shared-dma-pool";
            reusable;
            reg = <0x0 0x67800000 0x0 0x8000000>;
            linux,cma-default;
        };

        /* device specific region for contiguous allocations */
        drp_reserved: linux,CMAtoDRP {
            reusable;
            reg = <0x0 0x6F800000 0x0 0x10000000>;
        };

        v4l2_reserved: v4l2-DRP_buf@0 {
            compatible = "shared-dma-pool";
            reusable;
            reg = <0x0 0x7F800000 0x0 0x400000>; //4MiB
            label = "image_buf0";
        };

    };

    udmabuf@0 {
        compatible = "ikwzm,udmabuf-0.10.a";
        device-name = "udmabuf0";
        minor-number = <0>;
        size = <0x400000>; // 4MiB
        dma-coherent;
        memory-region = <&v4l2_reserved>;
    };

    vcc_sdhi0: regulator-vcc-sdhi0 {
        compatible = "regulator-fixed";

        regulator-name = "SDHI0 Vcc";
        regulator-min-microvolt = <3300000>;
        regulator-max-microvolt = <3300000>;
        regulator-always-on;
        regulator-boot-on;
    };

    vccq_sdhi0: regulator-vccq-sdhi0 {
        compatible = "regulator-gpio";

        regulator-name = "SDHI0 VccQ";
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <3300000>;
        gpios-states = <1>;
        states = <3300000 1
              1800000 0>;
    };

    reg_1p8v: regulator0 {
        compatible = "regulator-fixed";
        regulator-name = "fixed-1.8V";
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <1800000>;
        regulator-boot-on;
        regulator-always-on;
    };

    reg_3p3v: regulator1 {
        compatible = "regulator-fixed";
        regulator-name = "fixed-3.3V";
        regulator-min-microvolt = <3300000>;
        regulator-max-microvolt = <3300000>;
        regulator-boot-on;
        regulator-always-on;
    };
};

/* used cpg(clock pulse generator) */ 
&extal_clk {
	clock-frequency = <48000000>;
};

&xhci0 {
	status = "okay";
};

&usb3_peri0 {
    status = "okay";
    renesas,usb-role-switch;

    port {
        #address-cells = <1>;
        #size-cells = <0>;

        usb3peri_role_switch: endpoint@0 {
            reg = <0>;
            remote-endpoint = <&hd3ss3220_ep>;
        };
    };
};

&i2c0 {
    clock-frequency = <100000>;
    status = "okay";
    hd3ss3220@47 {
        compatible = "ti,hd3ss3220";
        reg = <0x47>;

        usb_con: connector {
            compatible = "usb-c-connector";
            label = "USB-C";
            data-role = "dual";
        };

        port {
            #address-cells = <1>;
            #size-cells = <0>;

            hd3ss3220_ep: endpoint@0 {
                reg = <0>;
                remote-endpoint = <&usb3peri_role_switch>;
            };
        };
    };
   clock-generator@68 {
       compatible = "idt,9fgv0241";
       reg = <0x68>;
    };
};

&i2c2 {
    clock-frequency = <100000>;
    status = "okay";
};

&uart0 {
    status = "okay";
};

&sdhi0 {
    status = "okay";
};

&eMM {
    status = "okay";
};

&avb {
    status = "okay";
};

&pwm8 {
    status = "okay";
};

&pwm9 {
    status = "okay";
};

&pwm10 {
    status = "okay";
};

&pwm11 {
    status = "okay";
};

&pwm12 {
    status = "okay";
};

&pwm13 {
    status = "okay";
};

&pwm14 {
    status = "okay";
};

&pwm15 {
    status = "okay";
};

&tim8 {
    status = "okay";
};

&tim9 {
    status = "okay";
};

&tim10 {
    status = "okay";
};

&tim11 {
    status = "okay";
};

&tim12 {
    status = "okay";
};

&tim13 {
    status = "okay";
};

&tim14 {
    status = "okay";
};

&tim15 {
    status = "okay";
};
&tim16 {
    status = "okay";
};

&tim17 {
    status = "okay";
};

&tim18 {
    status = "okay";
};

&tim19 {
    status = "okay";
};

&tim20 {
    status = "okay";
};

&tim21 {
    status = "okay";
};

&tim22 {
    status = "okay";
};

&tim23 {
    status = "okay";
};
